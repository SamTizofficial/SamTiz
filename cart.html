<!DOCTYPE html>
<html lang="ar">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>سلة المشتريات</title>

<style>
body { font-family: Arial; background:#f5f5f5; margin:0; direction:rtl; }
header { background:#069; color:#fff; padding:15px; text-align:center; }
.cart-item { background:#fff; margin:15px; padding:15px; border-radius:10px; display:flex; justify-content:space-between; align-items:center; }
button { background:#069; color:#fff; border:none; padding:5px 10px; border-radius:5px; margin-left:5px; cursor:pointer; }
#totalInfo { background:#fff; margin:15px; padding:15px; border-radius:10px; }
</style>

</head>
<body>

<header>
  <h1>سلة المشتريات</h1>
</header>

<div id="cartItems"></div>

<div id="totalInfo">
  <p>طريقة الدفع: الدفع عند الاستلام</p>
  <p style="color:red; font-weight:bold;">التوصيل متوفر حاليا بمدينة تزنيت فقط</p>
</div>

<script>
// بيانات السلة
let cart = JSON.parse(localStorage.getItem("cart") || "[]");
const cartItemsDiv = document.getElementById("cartItems");

// عرض السلة
function renderCart(){
  cartItemsDiv.innerHTML = "";
  if(cart.length === 0){
    cartItemsDiv.innerHTML = "<p>السلة فارغة</p>";
    return;
  }

  cart.forEach((item,index)=>{
    const div = document.createElement("div");
    div.className = "cart-item";
    div.innerHTML = `<span>${item.name} - ${item.price} x${item.qty}</span>`;
    cartItemsDiv.appendChild(div);
  });
}

renderCart();

// إرسال تلقائي للواتساب عند فتح الصفحة
window.onload = function() {
  if(cart.length === 0) return; // إذا السلة فارغة لا شيء

  // بيانات العميل (يمكن تعديلها أو أخذها من الفورم)
  let name = "Oussama";
  let lname = "Saim";
  let phone = "0712345678";
  let email = "Example@gmail.com";

  // تجهيز نص المنتجات
  let productsText = cart.map(i => `*[${i.name}]* [${i.price}] [x${i.qty}]`).join('%0A');
  let emailPart = email ? `%0A*البريد الإلكتروني:* ${email}` : "";

  // تكوين الرسالة بدون المجموع
  let message = `*طلب جديد:*%0A*الاسم:* ${name} ${lname}%0A*رقم الهاتف:* ${phone}${emailPart}%0A*المنتجات:*%0A${productsText}`;

  let whatsappNumber = "212696467092"; 
  let url = `https://wa.me/${whatsappNumber}?text=${message}`;

  window.open(url, "_blank", "noopener,noreferrer");
}
</script>

</body>
</html>
